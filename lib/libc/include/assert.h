/*********************************************************************
*
*   MODULE:
*       assert.h
*
*   DESCRIPTION:
*       Diagnostics
*
*********************************************************************/

#ifndef _ASSERT_H
#define _ASSERT_H

/*--------------------------------------------------------------------
                               INCLUDES
--------------------------------------------------------------------*/

#include <feature.h>
#include <stdlib.h>

/*--------------------------------------------------------------------
                          LITERAL CONSTANTS
--------------------------------------------------------------------*/

#if defined __USE_ISOC11 && !defined __cplusplus
# undef static_assert
# define static_assert _Static_assert
#endif

/*--------------------------------------------------------------------
                                TYPES
--------------------------------------------------------------------*/

/*--------------------------------------------------------------------
                           MEMORY CONSTANTS
--------------------------------------------------------------------*/

#ifdef __cplusplus
extern "C" {
#endif

/*--------------------------------------------------------------------
                                VARIABLES
--------------------------------------------------------------------*/

/*--------------------------------------------------------------------
                                MACROS
--------------------------------------------------------------------*/

#ifdef NDEBUG
#define assert(condition) ((void)0)

#else
    
extern void _assert( const char * condition, const char * file, unsigned int line, const char * func );

#define assert( condition )                         \
    do  {                                           \
        if( !(condition) )                          \
            {                                       \
            _assert( #condition, __FILE__, __LINE__, __func__ ); \
            }                                       \  
        }                                           \
    while(0)

#endif /* NDEBUG */

/*--------------------------------------------------------------------
                              PROCEDURES
--------------------------------------------------------------------*/

#ifdef __cplusplus
}
#endif
#endif /* _ASSERT_H */